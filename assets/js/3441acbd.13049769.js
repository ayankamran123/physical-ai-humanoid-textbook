"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[541],{3426:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"chapter-05","title":"Chapter 5","description":"Chapter 05: Robot Programming in Python & ROS2","source":"@site/docs/chapter-05.md","sourceDirName":".","slug":"/chapter-05","permalink":"/physical-ai-humanoid-textbook/docs/chapter-05","draft":false,"unlisted":false,"editUrl":"https://github.com/ayankamran123/physical-ai-humanoid-textbook/tree/main/docs/chapter-05.md","tags":[],"version":"current","frontMatter":{"id":"chapter-05","title":"Chapter 5","sidebar_label":"Chapter 5"},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 4","permalink":"/physical-ai-humanoid-textbook/docs/chapter-04"},"next":{"title":"Chapter 6","permalink":"/physical-ai-humanoid-textbook/docs/chapter-06"}}');var r=s(4848),t=s(8453);const o={id:"chapter-05",title:"Chapter 5",sidebar_label:"Chapter 5"},l=void 0,a={},c=[{value:"Chapter 05: Robot Programming in Python &amp; ROS2",id:"chapter-05-robot-programming-in-python--ros2",level:3},{value:"Learning Objectives",id:"learning-objectives",level:4},{value:"Theory Explanation",id:"theory-explanation",level:4},{value:"Diagrams",id:"diagrams",level:4},{value:"Python/ROS2 Code Examples",id:"pythonros2-code-examples",level:4},{value:"1. ROS2 Publisher-Subscriber Example (Python <code>rclpy</code>)",id:"1-ros2-publisher-subscriber-example-python-rclpy",level:5},{value:"2. ROS2 Service Example (Python <code>rclpy</code>)",id:"2-ros2-service-example-python-rclpy",level:5},{value:"Exercises + MCQs",id:"exercises--mcqs",level:4},{value:"Exercises",id:"exercises",level:5},{value:"Multiple Choice Questions",id:"multiple-choice-questions",level:5}];function d(e){const n={admonition:"admonition",code:"code",h3:"h3",h4:"h4",h5:"h5",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h3,{id:"chapter-05-robot-programming-in-python--ros2",children:"Chapter 05: Robot Programming in Python & ROS2"}),"\n",(0,r.jsx)(n.h4,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsx)(n.p,{children:"After studying this chapter, you should be able to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Understand the fundamental architecture and core communication concepts of Robot Operating System 2 (ROS2), including Nodes, Topics, Messages, Services, and Actions."}),"\n",(0,r.jsxs)(n.li,{children:["Master the creation, building, and management of ROS2 packages and Python nodes using the ",(0,r.jsx)(n.code,{children:"rclpy"})," client library."]}),"\n",(0,r.jsx)(n.li,{children:"Implement inter-node communication patterns: asynchronous publisher-subscriber for data streams and synchronous service-client for request-response interactions."}),"\n",(0,r.jsx)(n.li,{children:"Develop basic robot control scripts in Python, leveraging ROS2 APIs for simulated and real robotic platforms."}),"\n",(0,r.jsx)(n.li,{children:"Utilize ROS2 parameter server for dynamic configuration and explore basic debugging tools within the ROS2 ecosystem."}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"theory-explanation",children:"Theory Explanation"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5.1 Introduction to ROS2: A Robotics Middleware"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Robot Operating System 2 (ROS2)"})," is an open-source middleware suite for robot application development. It is not an operating system, but rather a set of software libraries, tools, and conventions that abstract away the complexities of low-level hardware interaction, inter-process communication, and distributed system management. ROS2 builds upon the success of ROS1, designed with modern distributed systems principles, ensuring better real-time capabilities, security, and multi-robot support."]}),"\n",(0,r.jsx)(n.p,{children:"ROS2 facilitates modular software development, allowing different functionalities (e.g., sensor drivers, navigation algorithms, manipulator control) to be developed and run as independent executable units, fostering code reuse and collaboration."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5.2 Core Concepts of ROS2 Communication"})}),"\n",(0,r.jsx)(n.p,{children:"ROS2 defines several fundamental communication mechanisms that enable a distributed network of robot software components to interact effectively."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5.2.1 Nodes"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Definition"}),": An executable process that performs a specific computation or task within the ROS2 ecosystem. Each node should ideally adhere to the Single Responsibility Principle, focusing on one logical function (e.g., a node for reading LiDAR data, a node for controlling motors, a node for path planning)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Role"}),": Nodes are the fundamental units of computation. They communicate with each other using the other ROS2 communication primitives."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5.2.2 Topics (Publisher-Subscriber)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pattern"}),": Asynchronous, one-to-many communication."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mechanism"}),": A node (publisher) sends data (messages) to a named channel (topic), and any other node (subscriber) interested in that data can subscribe to the topic to receive the messages."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Characteristics"}),": High-throughput, real-time data streaming (e.g., sensor readings like camera images, LiDAR scans, odometry data, joint states)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Messages"}),": Structured data types (defined in ",(0,r.jsx)(n.code,{children:".msg"})," files) that flow over topics. ROS2 provides a wide range of standard message types (",(0,r.jsx)(n.code,{children:"std_msgs"}),", ",(0,r.jsx)(n.code,{children:"sensor_msgs"}),", ",(0,r.jsx)(n.code,{children:"geometry_msgs"}),", etc.), and users can define custom messages."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5.2.3 Services (Client-Server)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pattern"}),": Synchronous, one-to-one, request-response communication."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mechanism"}),": A client node sends a request to a service server node and waits for a response. The server node executes a specific computation based on the request and sends back a response."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Characteristics"}),": Used for discrete, immediate actions or queries that require a clear result (e.g., triggering a robot to perform a specific action, querying a database, changing a robot's mode)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Service Definition"}),": Defined in ",(0,r.jsx)(n.code,{children:".srv"})," files, specifying both the request and response message structures."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5.2.4 Actions (Client-Server with Feedback)"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pattern"}),": Asynchronous, goal-oriented, long-running tasks with periodic feedback."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mechanism"}),": An action client sends a goal to an action server. The server processes the goal, provides continuous feedback on its progress, and eventually sends a final result upon completion (or cancellation)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Characteristics"}),": Suitable for tasks that take a significant amount of time and for which intermediate progress updates are useful (e.g., navigating to a specific location, performing a complex manipulation sequence)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Action Definition"}),": Defined in ",(0,r.jsx)(n.code,{children:".action"})," files, specifying the goal, feedback, and result message structures."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5.2.5 Parameters"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Definition"}),": Configuration values that can be set and accessed by nodes at runtime. They allow for dynamic tuning of node behavior without recompiling code."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Mechanism"}),": Nodes can declare parameters, and their values can be set via command-line arguments, YAML files, or programmatically. The ROS2 parameter server manages these values centrally."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5.3 ROS2 Package Structure and Build System"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ROS2 Packages"}),": The fundamental unit of organization in ROS2. A package encapsulates related nodes, libraries, message definitions, configuration files, and other resources. They promote modularity and reusability."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"colcon"})}),": The build tool used in ROS2 workspaces. It handles the compilation of various types of packages (Python, C++, etc.) and manages their dependencies."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Workspace"}),": A directory containing one or more ROS2 packages. It's where you ",(0,r.jsx)(n.code,{children:"colcon build"})," your packages and ",(0,r.jsx)(n.code,{children:"source install/setup.bash"})," (or ",(0,r.jsx)(n.code,{children:".zsh"}),") to make them available in your environment."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:["5.4 Python (",(0,r.jsx)(n.code,{children:"rclpy"}),") for ROS2 Development"]})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Python"})," is a highly favored language for ROS2 development, particularly for rapid prototyping, complex algorithms, and applications that leverage its extensive scientific and data processing libraries. The ",(0,r.jsx)(n.code,{children:"rclpy"})," client library provides intuitive Python bindings for all ROS2 core functionalities, making it straightforward to create nodes, publish/subscribe to topics, offer/request services, and interact with parameters."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"5.5 Simulation and Visualization Tools"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Simulation Environments"})," are indispensable for robot development. They provide a safe, repeatable, and cost-effective platform to test and debug robot software before deploying it on expensive or fragile physical hardware."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Gazebo"}),": A powerful 3D physics simulator that accurately models robot dynamics, sensor outputs (e.g., cameras, LiDAR), and environmental interactions. It allows for realistic testing of navigation, manipulation, and control algorithms."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RViz (ROS Visualization)"}),": A 3D visualization tool that displays real-time sensor data, robot models (from URDF), navigation paths, and other ROS2-enabled data. It is crucial for understanding the robot's state and debugging complex behaviors."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Foxglove Studio / RQt"}),": Modern alternatives or complements to RViz for visualizing ROS2 data streams, plotting sensor values, inspecting messages, and debugging nodes."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"diagrams",children:"Diagrams"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-mermaid",children:"graph TD\n    subgraph ROS2 Communication Overview\n        N1(Sensor Node) -- Publishes --\x3e T1(Topic: /image_raw);\n        N2(Motor Node) -- Subscribes --\x3e T2(Topic: /cmd_vel);\n        N1 -- Publishes --\x3e T3(Topic: /joint_states);\n\n        N3(Perception Node) -- Subscribes --\x3e T1;\n        N3 -- Publishes --\x3e T4(Topic: /object_pose);\n\n        N4(Navigation Node) -- Subscribes --\x3e T3;\n        N4 -- Subscribes --\x3e T4;\n        N4 -- Publishes --\x3e T2;\n\n        C1(Client Node) -- Request --\x3e S(Service: /calculate_path);\n        S -- Response --\x3e C1;\n\n        AC(Action Client: /move_base) -- Goal --\x3e AS(Action Server: /move_base);\n        AS -- Feedback --\x3e AC;\n        AS -- Result --\x3e AC;\n    end\n\n    subgraph ROS2 Development Workflow\n        Dev(Developer) --\x3e Code(Write Python/C++ Code);\n        Code --\x3e Pkg(ROS2 Package);\n        Pkg --\x3e WS(Colcon Workspace);\n        WS -- Build --\x3e Exec(Executable Nodes);\n        Exec -- Monitor/Debug --\x3e Viz(RViz/Foxglove);\n        Exec -- Simulate --\x3e Sim(Gazebo Simulation);\n        Sim -- Feedback --\x3e Code;\n    end\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Figure 5.1: ROS2 Core Communication Patterns and Development Workflow"})}),"\n",(0,r.jsx)(n.h4,{id:"pythonros2-code-examples",children:"Python/ROS2 Code Examples"}),"\n",(0,r.jsxs)(n.h5,{id:"1-ros2-publisher-subscriber-example-python-rclpy",children:["1. ROS2 Publisher-Subscriber Example (Python ",(0,r.jsx)(n.code,{children:"rclpy"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["This comprehensive example demonstrates two nodes: a ",(0,r.jsx)(n.code,{children:"MinimalPublisher"})," that sends string messages and a ",(0,r.jsx)(n.code,{children:"MinimalSubscriber"})," that receives and prints them, showcasing the fundamental topic communication pattern."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"minimal_publisher.py"})})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalPublisher(Node):\n\n    def __init__(self):\n        super().__init__('minimal_publisher')\n        # Create a publisher for the 'chatter' topic with String messages\n        # Queue size of 10 means max 10 messages stored if subscriber is slow\n        self.publisher_ = self.create_publisher(String, 'chatter', 10)\n        timer_period = 0.5  # seconds: publish every 0.5 seconds\n        self.timer = self.create_timer(timer_period, self.timer_callback)\n        self.i = 0\n        self.get_logger().info('MinimalPublisher node started and publishing to /chatter.')\n\n    def timer_callback(self):\n        msg = String()\n        msg.data = f'Hello ROS2 from Python! Count: {self.i}'\n        self.publisher_.publish(msg)\n        self.get_logger().info(f'Publishing: \"{msg.data}\"') # Log to console\n        self.i += 1\n\ndef main(args=None):\n    rclpy.init(args=args) # Initialize the ROS2 client library\n    minimal_publisher = MinimalPublisher()\n    rclpy.spin(minimal_publisher) # Keep node alive until shutdown\n    minimal_publisher.destroy_node()\n    rclpy.shutdown() # Shutdown the ROS2 client library\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"minimal_subscriber.py"})})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom std_msgs.msg import String\n\nclass MinimalSubscriber(Node):\n\n    def __init__(self):\n        super().__init__('minimal_subscriber')\n        # Create a subscriber for the 'chatter' topic with String messages\n        self.subscription = self.create_subscription(\n            String, 'chatter', self.listener_callback, 10)\n        self.get_logger().info('MinimalSubscriber node started and listening on /chatter.')\n\n    def listener_callback(self, msg):\n        # Callback function executed when a new message is received\n        self.get_logger().info(f'Received: \"{msg.data}\"')\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_subscriber = MinimalSubscriber()\n    rclpy.spin(minimal_subscriber)\n    minimal_subscriber.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"To run this example (assuming a ROS2 environment is sourced):"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create a ROS2 package"}),":\n",(0,r.jsx)(n.code,{children:"ros2 pkg create --build-type ament_python my_python_pkg"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Place files"}),": Save ",(0,r.jsx)(n.code,{children:"minimal_publisher.py"})," and ",(0,r.jsx)(n.code,{children:"minimal_subscriber.py"})," into ",(0,r.jsx)(n.code,{children:"my_python_pkg/my_python_pkg/"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Update ",(0,r.jsx)(n.code,{children:"setup.py"})]}),": Add entry points in ",(0,r.jsx)(n.code,{children:"my_python_pkg/setup.py"}),":","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"entry_points={\n    'console_scripts': [\n        'minimal_publisher = my_python_pkg.minimal_publisher:main',\n        'minimal_subscriber = my_python_pkg.minimal_subscriber:main',\n    ],\n},\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build"}),": Navigate to your workspace root and run ",(0,r.jsx)(n.code,{children:"colcon build --packages-select my_python_pkg"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Source"}),": ",(0,r.jsx)(n.code,{children:"source install/setup.bash"})," (or ",(0,r.jsx)(n.code,{children:"setup.zsh"})," for Zsh)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Run in separate terminals"}),":\n",(0,r.jsx)(n.code,{children:"ros2 run my_python_pkg minimal_publisher"}),"\n",(0,r.jsx)(n.code,{children:"ros2 run my_python_pkg minimal_subscriber"})]}),"\n"]}),"\n",(0,r.jsxs)(n.h5,{id:"2-ros2-service-example-python-rclpy",children:["2. ROS2 Service Example (Python ",(0,r.jsx)(n.code,{children:"rclpy"}),")"]}),"\n",(0,r.jsx)(n.p,{children:"This example defines a simple service that adds two integers and provides both the server and client implementations."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"AddTwoInts.srv"})," (in ",(0,r.jsx)(n.code,{children:"my_python_pkg/srv/"}),"):"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"int64 a\nint64 b\n---\nint64 sum\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"minimal_service.py"})," (Server)"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom my_python_pkg.srv import AddTwoInts # Import custom service type\n\nclass MinimalService(Node):\n\n    def __init__(self):\n        super().__init__('minimal_service')\n        self.srv = self.create_service(AddTwoInts, 'add_two_ints', self.add_two_ints_callback)\n        self.get_logger().info('Add Two Ints Service started.')\n\n    def add_two_ints_callback(self, request, response):\n        response.sum = request.a + request.b\n        self.get_logger().info(f'Incoming request: a={request.a}, b={request.b}')\n        self.get_logger().info(f'Sending response: sum={response.sum}')\n        return response\n\ndef main(args=None):\n    rclpy.init(args=args)\n    minimal_service = MinimalService()\n    rclpy.spin(minimal_service)\n    minimal_service.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"minimal_client.py"})," (Client)"]})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import sys\nimport rclpy\nfrom rclpy.node import Node\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, HistoryPolicy\nfrom my_python_pkg.srv import AddTwoInts\n\nclass MinimalClient(Node):\n\n    def __init__(self):\n        super().__init__('minimal_client')\n        # Use transient_local QoS profile for reliable service interaction\n        qos_profile = QoSProfile(\n            reliability=ReliabilityPolicy.RELIABLE,\n            history=HistoryPolicy.KEEP_LAST,\n            depth=1\n        )\n        self.cli = self.create_client(AddTwoInts, 'add_two_ints', qos_profile=qos_profile)\n        while not self.cli.wait_for_service(timeout_sec=1.0):\n            self.get_logger().info('Service not available, waiting again...')\n        self.req = AddTwoInts.Request()\n        self.get_logger().info('Add Two Ints Service client ready.')\n\n    def send_request(self, a, b):\n        self.req.a = a\n        self.req.b = b\n        self.future = self.cli.call_async(self.req)\n        rclpy.spin_until_future_complete(self, self.future)\n        return self.future.result()\n\ndef main(args=None):\n    rclpy.init(args=args)\n\n    if len(sys.argv) != 3:\n        print('Usage: ros2 run my_python_pkg minimal_client <arg1> <arg2>')\n        sys.exit(1)\n\n    minimal_client = MinimalClient()\n    response = minimal_client.send_request(int(sys.argv[1]), int(sys.argv[2]))\n    minimal_client.get_logger().info(f'Result of add_two_ints: for {sys.argv[1]} + {sys.argv[2]} = {response.sum}')\n\n    minimal_client.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"To run this service example:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Define service"}),": Create ",(0,r.jsx)(n.code,{children:"srv/AddTwoInts.srv"})," in ",(0,r.jsx)(n.code,{children:"my_python_pkg"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Update ",(0,r.jsx)(n.code,{children:"package.xml"})]}),": Add these lines:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<buildtool_depend>rosidl_default_generators</buildtool_depend>\n<exec_depend>rosidl_default_runtime</exec_depend>\n<member_of_group>rosidl_interface_packages</member_of_group>\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Update ",(0,r.jsx)(n.code,{children:"CMakeLists.txt"})]}),": Add to ",(0,r.jsx)(n.code,{children:"my_python_pkg/CMakeLists.txt"})," (before ",(0,r.jsx)(n.code,{children:"ament_python_install_package()"}),"):","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cmake",children:'find_package(rosidl_default_generators REQUIRED)\nrosidl_generate_interfaces(${PROJECT_NAME}\n  "srv/AddTwoInts.srv"\n)\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Place files"}),": Save ",(0,r.jsx)(n.code,{children:"minimal_service.py"})," and ",(0,r.jsx)(n.code,{children:"minimal_client.py"})," into ",(0,r.jsx)(n.code,{children:"my_python_pkg/my_python_pkg/"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:["Update ",(0,r.jsx)(n.code,{children:"setup.py"})]}),": Add entry points for both server and client."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Build"}),": ",(0,r.jsx)(n.code,{children:"colcon build --packages-select my_python_pkg"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Source"}),": ",(0,r.jsx)(n.code,{children:"source install/setup.bash"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Run in separate terminals"}),":\n",(0,r.jsx)(n.code,{children:"ros2 run my_python_pkg minimal_service"}),"\n",(0,r.jsx)(n.code,{children:"ros2 run my_python_pkg minimal_client 5 3"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"exercises--mcqs",children:"Exercises + MCQs"}),"\n",(0,r.jsx)(n.h5,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Custom Action Implementation"}),": Design a custom ROS2 action named ",(0,r.jsx)(n.code,{children:"DriveToGoal.action"})," that takes a ",(0,r.jsx)(n.code,{children:"target_pose"})," (geometry_msgs/Pose) as a goal, provides ",(0,r.jsx)(n.code,{children:"current_pose"})," (geometry_msgs/Pose) as feedback, and returns ",(0,r.jsx)(n.code,{children:"success"})," (bool) as a result. Outline the high-level steps and code structure for both an action client and an action server using ",(0,r.jsx)(n.code,{children:"rclpy"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Parameter Tuning"}),": You have a ",(0,r.jsx)(n.code,{children:"robot_navigation_node"})," with a ",(0,r.jsx)(n.code,{children:"max_linear_speed"})," parameter. Describe two different methods to change this parameter's value at runtime in ROS2 without restarting the node. Explain when you might prefer one method over the other."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Simulation Integration"}),": Research the ",(0,r.jsx)(n.code,{children:"ros2_gazebo"})," package and ",(0,r.jsx)(n.code,{children:"gazebo_ros2_control"})," plugin. Explain how to launch a simple Gazebo simulation with a robot model (e.g., using ",(0,r.jsx)(n.code,{children:"robot_state_publisher"}),") and connect a ",(0,r.jsx)(n.code,{children:"diff_drive_controller"})," from ",(0,r.jsx)(n.code,{children:"ros2_control"})," to control its wheels via ROS2 topics."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Debugging ROS2"}),": Imagine a scenario where your ",(0,r.jsx)(n.code,{children:"minimal_publisher"})," node is running, but your ",(0,r.jsx)(n.code,{children:"minimal_subscriber"})," node isn't receiving messages. List three ROS2 command-line tools you would use to diagnose the problem and explain what each tool would help you check."]}),"\n"]}),"\n",(0,r.jsx)(n.h5,{id:"multiple-choice-questions",children:"Multiple Choice Questions"}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["What is the primary role of an ",(0,r.jsx)(n.strong,{children:"Action"})," in ROS2 communication?"]}),(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","To send configuration parameters to a node."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","For short, synchronous request-response interactions."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","For long-running, goal-oriented tasks that provide periodic feedback."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","To stream continuous sensor data asynchronously."]}),"\n"]})]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.p,{children:"Which ROS2 tool is used to build packages in a workspace?"}),(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.code,{children:"rosdep"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.code,{children:"ros2 pkg create"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ",(0,r.jsx)(n.code,{children:"colcon build"})]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,r.jsx)(n.code,{children:"rqt_graph"})]}),"\n"]})]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.p,{children:"If a ROS2 node needs to frequently publish camera images to multiple listeners, which communication primitive is most appropriate?"}),(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Service"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Topic"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Action"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Parameter"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsx)(n.p,{children:"To dynamically change a configuration value (e.g., a PID gain) of a running ROS2 node without recompiling, you would typically use:"}),(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Topics"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Services"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Parameters"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Actions"]}),"\n"]})]}),"\n",(0,r.jsxs)(n.admonition,{type:"info",children:[(0,r.jsxs)(n.p,{children:["Which of the following is a primary benefit of using ",(0,r.jsx)(n.strong,{children:"Gazebo"})," in robot development?"]}),(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","It's a text-based tool for code editing."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","It directly controls physical robot hardware."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","It provides a realistic 3D physics simulation environment for testing robot software."]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","It's used for defining custom ROS2 message types."]}),"\n"]})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);